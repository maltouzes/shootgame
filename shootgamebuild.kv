# -*- coding: utf-8 -*-
#:kivy 1.9.1
#:import os os
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import Factory kivy.factory.Factory

<StartScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.height
        source: app.background1

    ImgButton:
        source: app.ASSETPATH + 'play_green'
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        on_press: app.time_mode()
        on_press: root.manager.current = 'level'
        size_hint: 0.3, 0.3

    ImgButton:
        source: app.ASSETPATH + 'leave_grey'
        pos_hint: {'center_x': 0.8, 'center_y': 0.5}
        on_press: app.leave()
        size_hint: 0.2, 0.2

    ImgButton:
        source: app.ASSETPATH + 'exclamation_mark_grey'
        pos_hint: {'center_x': 0.38, 'center_y': 0.3}
        on_press: root.manager.current = 'credits'
        size_hint: 0.2, 0.2

    ImgButton:
        source: app.ASSETPATH + 'bowl_yellow'
        pos_hint: {'center_x': 0.2, 'center_y': 0.5}
        on_press: root.manager.current = 'scores'
        size_hint: 0.2, 0.2

    ImgButton:
        source: app.ASSETPATH + 'cogwheel_grey'
        pos_hint: {'center_x': 0.62, 'center_y': 0.3}
        on_press: root.manager.current = 'options'
        size_hint: 0.2, 0.2

<LevelScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.width/self.image_ratio
        source: app.background1

    ImgButton:
        source: app.ASSETPATH + 'bubble_green'
        pos_hint: {'center_x': 0.3, 'center_y': 0.7}
        on_press: root.manager.current = 'game'
        on_press: app.start_easy()
        # size_hint: 1.2, None
    Label:
        text: "Easy"
        pos_hint: {'center_x': 0.3, 'center_y': 0.7}
        font_size: '26sp'

    ImgButton:
        source: app.ASSETPATH + 'bubble_yellow'
        pos_hint: {'center_x': 0.7, 'center_y': 0.7}
        on_press: app.start_medium()
        on_press: root.manager.current = 'game'
        # size_hint: 1.2, None
    Label:
        text: "Medium"
        pos_hint: {'center_x': 0.7, 'center_y': 0.7}
        font_size: '26sp'

    ImgButton:
        source: app.ASSETPATH + 'bubble_blue'
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        on_press: root.manager.current = 'game'
        on_press: app.start_hard()
        # size_hint: 1.2, None
    Label:
        text: "Hard"
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        font_size: '26sp'


<PauseScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.width/self.image_ratio
        source: app.background1

    GifButton:
        id: birdgif
        source: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        on_press: root.manager.current = 'game'
    Label:
        text: "Resume"
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}

    ImgButton:
        source: app.ASSETPATH + 'home_yellow'
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        on_press: root.manager.current = 'menu'
        # size_hint: None, None
        size_hint: 1.2, None

<ShootScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.width/self.image_ratio
        source: app.background2

    Label:
        id: combolabel
        text: ''
        pos_hint: {'center_x': 0.2, 'center_y': 0.9}
        font_size: '25sp'
        markup: True
        color: 0, 0, 0, 1

    Label:
        text: 'Points ' + str(app.pointsdisplay)
        pos_hint: {'center_x': 0.6, 'center_y': 0.9}
        font_size: '25sp'
        markup: True
        color: 0, 0, 0, 1

    Label:
        id: timerlabel
        text: 'Time ' + str(app.timer)
        pos_hint: {'center_x': 0.9, 'center_y': 0.9}
        font_size: '25sp'
        markup: True
        color: 0, 0, 0, 1

<WinScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.width/self.image_ratio
        source: app.background3

    # canvas.before:
        # Rectangle:
            # pos: self.pos
            # size: self.size
            # source: app.background3

    Label:
        text: str(app.points)
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        font_size: '25sp'

    Label:
        text: str(app.newrecord)
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        font_size: '25sp'


    ImgButton:
        source: app.ASSETPATH + 'home_yellow'
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        on_press: root.manager.current = 'menu'
        size_hint: None, None

<CreditsScreen>
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.height
        source: app.background1

    ScrollView:
        Label:
            text: root.txt
            font_name: os.getcwd() + '/fonts/BubblegumSans-Regular.otf'
            font_size: '35sp'
            halign: 'center'
            # bold: True
            markup: True
            color: 0, 0, 0, 1
            size_hint_y: None
            text_size: self.width, None
            height: self.texture_size[1]
            on_ref_press:
                import webbrowser
                webbrowser.open(args[1])

<ScoresScreen>
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.height
        source: app.background1

    Label:
        text: 'Easy ' + str(app.bestscore['easy'])
        pos_hint: {'center_x': 0.3, 'center_y': 0.8}
        bold: True
        font_size: '30sp'
    GifButton:
        id: bonus1
        source: app.ASSETPATH + "BirdGreen-idle-1"
        pos_hint: {'center_x': 0.6, 'center_y': 0.8}
    Label:
        id: textbonus1
        text: 'Beginner'
        pos_hint: {'center_x': 0.8, 'center_y': 0.8}
        bold: True
        font_size: '30sp'

    Label:
        text: 'Medium ' + str(app.bestscore['medium'])
        pos_hint: {'center_x': 0.3, 'center_y': 0.6}
        bold: True
        font_size: '30sp'
    GifButton:
        id: bonus2
        source: app.ASSETPATH + "BirdGreen-idle-1"
        pos_hint: {'center_x': 0.6, 'center_y': 0.6}
    Label:
        id: textbonus2
        text: 'Beginner'
        pos_hint: {'center_x': 0.8, 'center_y': 0.6}
        bold: True
        font_size: '30sp'

    Label:
        text: 'Hard ' + str(app.bestscore['hard'])
        pos_hint: {'center_x': 0.3, 'center_y': 0.4}
        bold: True
        font_size: '30sp'
    GifButton:
        id: bonus3
        source: app.ASSETPATH + "BirdGreen-idle-1"
        pos_hint: {'center_x': 0.6, 'center_y': 0.4}
    Label:
        id: textbonus3
        text: 'Beginner'
        pos_hint: {'center_x': 0.8, 'center_y': 0.4}
        bold: True
        font_size: '30sp'


    ImgButton:
        source: app.ASSETPATH + 'home_yellow'
        pos_hint: {'center_x': 0.5, 'center_y': 0.2}
        on_press: root.manager.current = 'menu'
        # size_hint: None, None
        size_hint: 1.2, None

<OptionsScreen>:
    Image:
        allow_stretch: False
        keep_ratio: True
        # size_hint_x: None
        # size_hint_y: None
        width: self.parent.width
        height: self.parent.height
        source: app.background1

    ImgButton:
        size_hint: 0.15, 0.15
        source: app.ASSETPATH + 'music'
        pos_hint: {'center_x': 0.3, 'center_y': 0.8}
    MyCheckbox:
        id: checkbox_volume
        active: True
        pos_hint: {'center_x': 0.6, 'center_y': 0.8}
        on_press: root.change_volume(self)
    Slider:
        id: slider_volume
        size_hint: 0.5, 0.15
        # value: app.sound_game.volume * 100
        value: app.music_volume * 100
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        # pos_hint_y: 0.6
        cursor_image: app.ASSETPATH + 'bubble_green'
        background_width: 60
        on_value: app.sound_game.volume = self.value_normalized
        on_value: root.checkbox(self.value)
    ImgButton:
        size_hint: 0.15, 0.15
        source: app.ASSETPATH + 'trash_grey'
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        on_release: Factory.MyPopup().open()

<MyPopup@Popup>:
    auto_dismiss: False
    title: ""
    separator_height: 0
    background: app.background1
    FloatLayout:
        Label:
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            font_name: os.getcwd() + '/fonts/BubblegumSans-Regular.otf'
            # markup: True
            color: 0, 0, 0, 1
            text: "Delete scores?"
            font_size: '50sp'
        ImgButton:
            source: app.ASSETPATH + 'trash_yellow'
            pos_hint: {'center_x': 0.3, 'center_y': 0.4}
            size_hint: 0.35, 0.35
            text: 'Yes!'
            on_release: root.dismiss()
            on_press: app.reset_score()
        ImgButton:
            text: 'No!'
            size_hint: 0.35, 0.35
            pos_hint: {'center_x': 0.7, 'center_y': 0.4}
            source: app.ASSETPATH + 'cross_green'
            on_release: root.dismiss()
